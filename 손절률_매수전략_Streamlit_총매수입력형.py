import streamlit as st
import pandas as pd

# ê¸°ë³¸ê°’
ê¸°ë³¸_ì´ë§¤ìˆ˜ê¸ˆì•¡ = 1000000

# ë°ì´í„° ì •ì˜ (ë¹„ì¤‘ë§Œ ì…ë ¥í•´ë‘ê³  ê¸ˆì•¡ì€ ì´ë§¤ìˆ˜ê¸ˆì•¡ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°)
data = {
    'ì†ì ˆë¥ (%)': list(range(3, 26)),
    'ë§¤ìˆ˜ë¹„ì¤‘(%)': [
        100, 75, 60, 50, 43, 38, 33, 30, 27, 25,
        23, 21, 20, 19, 18, 17, 16, 15, 14, 14,
        13, 13, 12
    ]
}
df = pd.DataFrame(data)

# UI
st.title("ğŸ“Š ì†ì ˆë¥  ê¸°ë°˜ ë§¤ìˆ˜ ì „ëµ ì‹œë®¬ë ˆì´í„°")

# ì…ë ¥ ë°›ê¸°
col1, col2, col3 = st.columns(3)
with col1:
    ì´ë§¤ìˆ˜ê¸ˆì•¡ = st.number_input("ì´ ë§¤ìˆ˜ê¸ˆì•¡ (â‚©)", value=ê¸°ë³¸_ì´ë§¤ìˆ˜ê¸ˆì•¡, step=100000, format="%d")
with col2:
    í˜„ì¬ê°€ = st.number_input("í˜„ì¬ê°€", value=38025, step=100, format="%d")
with col3:
    ì†ì ˆê°€ = st.number_input("ì†ì ˆê°€", value=35050, step=100, format="%d")

# ì†ì ˆë¥  ê³„ì‚°
if í˜„ì¬ê°€ > 0 and ì†ì ˆê°€ > 0 and ì†ì ˆê°€ < í˜„ì¬ê°€:
    ì†ì ˆë¥  = round((í˜„ì¬ê°€ - ì†ì ˆê°€) / í˜„ì¬ê°€ * 100, 2)
    st.markdown(f"### ğŸ“‰ ì†ì ˆë¥ : **{ì†ì ˆë¥ }%**")

    # ë§¤ìˆ˜ê¸ˆì•¡ ê³„ì‚°
    df["ë§¤ìˆ˜ê¸ˆì•¡"] = (df["ë§¤ìˆ˜ë¹„ì¤‘(%)"] / 100 * ì´ë§¤ìˆ˜ê¸ˆì•¡).round().astype(int)
    df["ë§¤ìˆ˜ê¸ˆì•¡"] = df["ë§¤ìˆ˜ê¸ˆì•¡"].apply(lambda x: f"{x:,}")

    # í•´ë‹¹ ì†ì ˆë¥  í–‰ ì¶”ì¶œ
    ì¶”ì²œ = df[df["ì†ì ˆë¥ (%)"] == round(ì†ì ˆë¥ )]
    if not ì¶”ì²œ.empty:
        st.success("ğŸ’¡ í•´ë‹¹ ì†ì ˆë¥ ì˜ ë§¤ìˆ˜ ì „ëµ")
        st.dataframe(ì¶”ì²œ)
    else:
        st.warning("í•´ë‹¹ ì†ì ˆë¥ ì— ë§ëŠ” ë§¤ìˆ˜ì „ëµì´ ì—†ìŠµë‹ˆë‹¤.")

    # ì „ì²´ í‘œë„ ì¶œë ¥
    with st.expander("ğŸ“‹ ì „ì²´ ì „ëµí‘œ ë³´ê¸°"):
        st.dataframe(df)
else:
    st.info("â„¹ï¸ í˜„ì¬ê°€ì™€ ì†ì ˆê°€ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš” (ì†ì ˆê°€ëŠ” í˜„ì¬ê°€ë³´ë‹¤ ì‘ì•„ì•¼ í•©ë‹ˆë‹¤).")
